
<div class="d-flex flex-column h-100">

  <!-- streaming -->
  <div class="flex-grow-0 border-bottom border-dark" style="max-height: 30%">
      <chat-video [playbackUrl]="event.url" [options]="{ autoplay: true, controls: false }"></chat-video>
  </div>

  <div class="d-flex border-bottom border-dark">
    <div style="font-size: 5vh">
      <div (click)="onLike()"><fa-icon class="ml-2" style="color:orange" [icon]="faHeart"></fa-icon></div>
    </div>
    <div class="flex-grow-1 mr-2 pt-3" style="text-align: right">
      <button type="button" class="btn btn-primary pr-5 pl-5" style="font-size: 1.2rem" (click)="onConductCodeModal()">Top Fã? Entra aqui</button>
    </div>
  </div>

  <!-- Header -->
  <div class="card-body flex-grow-0 flex-shrink-0 border-bottom border-dark">
    <div class="d-flex justify-content-between font-weight-bold">
      <!-- Room Title -->
      <div class="text-muted">
        <fa-icon class="mr-2" [icon]="faComment"></fa-icon>
        <span>Chat</span>
      </div>

      <!-- Room Status -->
      <div class="text-success" *ngIf="roomStatus == SocketStatus.CONNECTED">• {{ roomSize }} Online</div>
      <div class="text-warning" *ngIf="roomStatus == SocketStatus.CONNECTING">• Conectando...</div>
      <div class="text-muted" *ngIf="roomStatus == SocketStatus.DISCONNECTED">• Indisponível</div>
    </div>
  </div>

  <!-- Log -->
  <div class="card-body flex-grow-1 overflow-auto py-0" style="max-height: 100%" #chatLog>
    <div *ngFor="let message of chatMessages">
      <span class="text-primary">{{ chatMessage$from(message) }}</span>&nbsp;
      <span class="text-muted">{{ chatMessage$time(message) }}</span>&nbsp;
      <span class="text-white">{{ chatMessage$message(message) }}</span>
    </div>
  </div>

  <!-- Input -->
  <div class="card-body flex-grow-0 flex-shrink-0">
    <div class="d-flex align-items-center">
      <label class="flex-grow-1 mb-0 mr-3"><input class="form-control text-white" [(ngModel)]="chatInput" (keyup.enter)="onClickSend()"></label>
      <button class="btn border-0 p-0" [disabled]="chatDisabled" [ngClass]="chatDisabled ? 'btn-outline-dark' : 'btn-outline-primary'" style="height: 48px; width: 48px"
              (click)="onClickSend()">
        <fa-icon [icon]="faArrowRight" size="2x"></fa-icon>
      </button>
    </div>
  </div>
</div>

<div *ngIf="modal"><app-chat-window-modal></app-chat-window-modal></div>

